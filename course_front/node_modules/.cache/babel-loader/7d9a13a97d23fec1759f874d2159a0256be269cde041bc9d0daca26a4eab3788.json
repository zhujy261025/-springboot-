{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"width\": \"256px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_a_menu_item = _resolveComponent(\"a-menu-item\");\n  const _component_sub_menu = _resolveComponent(\"sub-menu\");\n  const _component_a_menu = _resolveComponent(\"a-menu\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_a_menu, {\n    style: {\n      \"width\": \"200px\",\n      \"min-height\": \"calc(100vh - 50px)\"\n    },\n    openKeys: $setup.openKeys,\n    \"onUpdate:openKeys\": _cache[0] || (_cache[0] = $event => $setup.openKeys = $event),\n    selectedKeys: $setup.selectedKeys,\n    \"onUpdate:selectedKeys\": _cache[1] || (_cache[1] = $event => $setup.selectedKeys = $event),\n    mode: \"inline\",\n    \"inline-collapsed\": $setup.collapsed\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.menuList, item => {\n      return _openBlock(), _createElementBlock(_Fragment, {\n        key: item.key\n      }, [!item.children ? (_openBlock(), _createBlock(_component_a_menu_item, {\n        key: item.key\n      }, {\n        default: _withCtx(() => [_createVNode(_component_router_link, {\n          to: '/' + item.key\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(item.title), 1 /* TEXT */)]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"to\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */)) : (_openBlock(), _createBlock(_component_sub_menu, {\n        key: item.key,\n        \"menu-info\": item\n      }, null, 8 /* PROPS */, [\"menu-info\"]))], 64 /* STABLE_FRAGMENT */);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"openKeys\", \"selectedKeys\", \"inline-collapsed\"])]);\n}","map":{"version":3,"mappings":";;EACOA,KAAoB,EAApB;IAAA;EAAA;AAAoB;;;;;;uBAAzBC,oBAqBM,OArBNC,UAqBM,GAnBJC,aAkBSC;IAjBLJ,KAAmD,EAAnD;MAAA;MAAA;IAAA,CAAmD;IAC3CK,QAAQ,EAAEC,eAAQ;6DAARA,eAAQ;IAClBC,YAAY,EAAED,mBAAY;iEAAZA,mBAAY;IAClCE,IAAI,EAAC,QAAQ;IACZ,kBAAgB,EAAEF;;sBAGX,MAAwB,oBAAlCL,oBASWQ,6BATcH,eAAQ,EAAhBI,IAAI;;aAAoBA,IAAI,CAACC;WAC3BD,IAAI,CAACE,QAAQ,kBAC5BC,aAEcC;QAFAH,GAAG,EAAED,IAAI,CAACC;;0BACtB,MAA+D,CAA/DR,aAA+DY;UAAjDC,EAAE,QAAMN,IAAI,CAACC;;4BAAM,MAAgB,mCAAbD,IAAI,CAACO,KAAK;;;;;qDAIhDJ,aAA8CK;QAAnCP,GAAG,EAAED,IAAI,CAACC,GAAG;QAAG,WAAS,EAAED","names":["style","_createElementBlock","_hoisted_1","_createVNode","_component_a_menu","openKeys","$setup","selectedKeys","mode","_Fragment","item","key","children","_createBlock","_component_a_menu_item","_component_router_link","to","title","_component_sub_menu"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\components\\Menu.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 256px\">\r\n\r\n    <a-menu\r\n        style=\"width: 200px;min-height: calc(100vh - 50px)\"\r\n        v-model:openKeys=\"openKeys\"\r\n        v-model:selectedKeys=\"selectedKeys\"\r\n        mode=\"inline\"\r\n        :inline-collapsed=\"collapsed\"\r\n    >\r\n\r\n      <template v-for=\"item in menuList\" :key=\"item.key\">\r\n        <template v-if=\"!item.children\">\r\n          <a-menu-item :key=\"item.key\">\r\n            <router-link :to=\"'/'+item.key\"> {{ item.title }}</router-link>\r\n          </a-menu-item>\r\n        </template>\r\n        <template v-else>\r\n          <sub-menu :key=\"item.key\" :menu-info=\"item\" />\r\n        </template>\r\n      </template>\r\n    </a-menu>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {computed, defineComponent, onMounted, ref} from 'vue';\r\nimport { MenuFoldOutlined, MenuUnfoldOutlined, PieChartOutlined, MailOutlined } from '@ant-design/icons-vue';\r\nimport SubMenu from \"@/components/SubMenu\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  components: {\r\n    'sub-menu': SubMenu,\r\n    MenuFoldOutlined,\r\n    MenuUnfoldOutlined,\r\n    PieChartOutlined,\r\n  },\r\n  setup() {\r\n    // 登录成功后 保存返回来的用户对象\r\n    const menuList = ref([\r\n      { key: '0000', title: '首页'},\r\n      // {\r\n      //   key: '1000',\r\n      //   title: '基础信息管理',\r\n      //   children: [{ key: '1001', title: '教师管理' },\r\n      //     { key: '1002', title: '主任管理'}],\r\n      // },\r\n      // {\r\n      //   key: '2000',\r\n      //   title: '公告信息管理',\r\n      //   children: [{ key: '2001', title: '公告管理' }],\r\n      // },\r\n      // {\r\n      //   key: '3000',\r\n      //   title: '课程管理',\r\n      //   children: [{ key: '3001', title: '课程管理' },\r\n      //     { key: '3002', title: '听课管理'}],\r\n      // },\r\n      // {\r\n      //   key: '4000',\r\n      //   title: '系统管理',\r\n      //   children: [{ key: '4001', title: '角色管理' },\r\n      //     { key: '4002', title: '修改密码'}],\r\n      // },\r\n\r\n\r\n    ]);\r\n    const user = computed(()=> store.state.user )\r\n    const getList = () =>{\r\n\r\n      const powerStr = user.value.power;\r\n\r\n      const powers = user.value.power.split(\",\");\r\n      console.log(powers)\r\n      for (let i=0; i<powers.length; i++){\r\n        const p = powers[i];\r\n        if (p === '1001'){\r\n          menuList.value.push ({\r\n            key: '1000',\r\n            title: '基础信息管理',\r\n            children: [{\r\n              key: '1001',\r\n              title: '教师管理',\r\n            }],\r\n          });\r\n        }\r\n        if (p === '1002'){\r\n          if (powerStr.indexOf(\"1001\") === -1){\r\n            menuList.value.push ({\r\n              key: '1000',\r\n              title: '基础信息管理',\r\n              children: [{\r\n                key: '1002',\r\n                title: '主任管理',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '1002', title: '主任管理',})\r\n          }\r\n\r\n\r\n\r\n        }\r\n        if (p === '2001'){\r\n          menuList.value.push({\r\n            key: '2000',\r\n            title: '公告信息管理',\r\n            children: [{\r\n              key: '2001',\r\n              title: '公告管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '3001'){\r\n          menuList.value.push({\r\n            key: '3000',\r\n            title: '课程管理',\r\n            children: [{\r\n              key: '3001',\r\n              title: '课程管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '3002'){\r\n\r\n          if (powerStr.indexOf(\"3001\") == -1){\r\n            menuList.value.push ({\r\n              key: '3000',\r\n              title: '课程管理',\r\n              children: [{\r\n                key: '3002',\r\n                title: '听课管理',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '3002', title: '听课管理',})\r\n          }\r\n\r\n        }\r\n\r\n        if (p === '4001'){\r\n          menuList.value.push({\r\n            key: '4000',\r\n            title: '系统管理',\r\n            children: [{\r\n              key: '4001',\r\n              title: '角色管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '4002'){\r\n\r\n          if (powerStr.indexOf(\"4001\") === -1){\r\n            menuList.value.push ({\r\n              key: '4000',\r\n              title: '系统管理',\r\n              children: [{\r\n                key: '4002',\r\n                title: '修改密码',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '4002', title: '修改密码',})\r\n          }\r\n\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    const collapsed = ref(false);\r\n    const toggleCollapsed = () => {\r\n      collapsed.value = !collapsed.value;\r\n    };\r\n\r\n    onMounted(()=>{\r\n      getList()\r\n    })\r\n    return {\r\n      menuList,\r\n      collapsed,\r\n      toggleCollapsed,\r\n      selectedKeys: ref(['0000']),\r\n      openKeys: ref(['0000']),\r\n    };\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}