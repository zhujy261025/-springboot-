{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, defineComponent, onMounted, ref } from 'vue';\nimport { MenuFoldOutlined, MenuUnfoldOutlined, PieChartOutlined, MailOutlined } from '@ant-design/icons-vue';\nimport SubMenu from \"@/components/SubMenu\";\nimport store from \"@/store\";\nexport default {\n  components: {\n    'sub-menu': SubMenu,\n    MenuFoldOutlined,\n    MenuUnfoldOutlined,\n    PieChartOutlined\n  },\n  setup() {\n    // 登录成功后 保存返回来的用户对象\n    const menuList = ref([{\n      key: '0000',\n      title: '首页'\n    }\n    // {\n    //   key: '1000',\n    //   title: '基础信息管理',\n    //   children: [{ key: '1001', title: '教师管理' },\n    //     { key: '1002', title: '主任管理'}],\n    // },\n    // {\n    //   key: '2000',\n    //   title: '公告信息管理',\n    //   children: [{ key: '2001', title: '公告管理' }],\n    // },\n    // {\n    //   key: '3000',\n    //   title: '课程管理',\n    //   children: [{ key: '3001', title: '课程管理' },\n    //     { key: '3002', title: '听课管理'}],\n    // },\n    // {\n    //   key: '4000',\n    //   title: '系统管理',\n    //   children: [{ key: '4001', title: '角色管理' },\n    //     { key: '4002', title: '修改密码'}],\n    // },\n    ]);\n\n    const user = computed(() => store.state.user);\n    const getList = () => {\n      const powerStr = user.value.power;\n      const powers = user.value.power.split(\",\");\n      console.log(powers);\n      for (let i = 0; i < powers.length; i++) {\n        const p = powers[i];\n        if (p === '1001') {\n          menuList.value.push({\n            key: '1000',\n            title: '基础信息管理',\n            children: [{\n              key: '1001',\n              title: '教师管理'\n            }]\n          });\n        }\n        if (p === '1002') {\n          if (powerStr.indexOf(\"1001\") === -1) {\n            menuList.value.push({\n              key: '1000',\n              title: '基础信息管理',\n              children: [{\n                key: '1002',\n                title: '主任管理'\n              }]\n            });\n          } else {\n            menuList.value[menuList.value.length - 1].children.push({\n              key: '1002',\n              title: '主任管理'\n            });\n          }\n        }\n        if (p === '2001') {\n          menuList.value.push({\n            key: '2000',\n            title: '公告信息管理',\n            children: [{\n              key: '2001',\n              title: '公告管理'\n            }]\n          });\n        }\n        if (p === '3001') {\n          menuList.value.push({\n            key: '3000',\n            title: '课程管理',\n            children: [{\n              key: '3001',\n              title: '课程管理'\n            }]\n          });\n        }\n        if (p === '3002') {\n          if (powerStr.indexOf(\"3001\") == -1) {\n            menuList.value.push({\n              key: '3000',\n              title: '课程管理',\n              children: [{\n                key: '3002',\n                title: '听课管理'\n              }]\n            });\n          } else {\n            menuList.value[menuList.value.length - 1].children.push({\n              key: '3002',\n              title: '听课管理'\n            });\n          }\n        }\n        if (p === '4001') {\n          menuList.value.push({\n            key: '4000',\n            title: '系统管理',\n            children: [{\n              key: '4001',\n              title: '角色管理'\n            }]\n          });\n        }\n        if (p === '4002') {\n          if (powerStr.indexOf(\"4001\") === -1) {\n            menuList.value.push({\n              key: '4000',\n              title: '系统管理',\n              children: [{\n                key: '4002',\n                title: '修改密码'\n              }]\n            });\n          } else {\n            menuList.value[menuList.value.length - 1].children.push({\n              key: '4002',\n              title: '修改密码'\n            });\n          }\n        }\n      }\n    };\n    const collapsed = ref(false);\n    const toggleCollapsed = () => {\n      collapsed.value = !collapsed.value;\n    };\n    onMounted(() => {\n      getList();\n    });\n    return {\n      menuList,\n      collapsed,\n      toggleCollapsed,\n      selectedKeys: ref(['0000']),\n      openKeys: ref(['0000'])\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["computed","defineComponent","onMounted","ref","MenuFoldOutlined","MenuUnfoldOutlined","PieChartOutlined","MailOutlined","SubMenu","store","components","setup","menuList","key","title","user","state","getList","powerStr","value","power","powers","split","console","log","i","length","p","push","children","indexOf","collapsed","toggleCollapsed","selectedKeys","openKeys"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\components\\Menu.vue"],"sourcesContent":["<template>\r\n  <div style=\"width: 256px\">\r\n\r\n    <a-menu\r\n        style=\"width: 200px;min-height: calc(100vh - 50px)\"\r\n        v-model:openKeys=\"openKeys\"\r\n        v-model:selectedKeys=\"selectedKeys\"\r\n        mode=\"inline\"\r\n        :inline-collapsed=\"collapsed\"\r\n    >\r\n\r\n      <template v-for=\"item in menuList\" :key=\"item.key\">\r\n        <template v-if=\"!item.children\">\r\n          <a-menu-item :key=\"item.key\">\r\n            <router-link :to=\"'/'+item.key\"> {{ item.title }}</router-link>\r\n          </a-menu-item>\r\n        </template>\r\n        <template v-else>\r\n          <sub-menu :key=\"item.key\" :menu-info=\"item\" />\r\n        </template>\r\n      </template>\r\n    </a-menu>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {computed, defineComponent, onMounted, ref} from 'vue';\r\nimport { MenuFoldOutlined, MenuUnfoldOutlined, PieChartOutlined, MailOutlined } from '@ant-design/icons-vue';\r\nimport SubMenu from \"@/components/SubMenu\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  components: {\r\n    'sub-menu': SubMenu,\r\n    MenuFoldOutlined,\r\n    MenuUnfoldOutlined,\r\n    PieChartOutlined,\r\n  },\r\n  setup() {\r\n    // 登录成功后 保存返回来的用户对象\r\n    const menuList = ref([\r\n      { key: '0000', title: '首页'},\r\n      // {\r\n      //   key: '1000',\r\n      //   title: '基础信息管理',\r\n      //   children: [{ key: '1001', title: '教师管理' },\r\n      //     { key: '1002', title: '主任管理'}],\r\n      // },\r\n      // {\r\n      //   key: '2000',\r\n      //   title: '公告信息管理',\r\n      //   children: [{ key: '2001', title: '公告管理' }],\r\n      // },\r\n      // {\r\n      //   key: '3000',\r\n      //   title: '课程管理',\r\n      //   children: [{ key: '3001', title: '课程管理' },\r\n      //     { key: '3002', title: '听课管理'}],\r\n      // },\r\n      // {\r\n      //   key: '4000',\r\n      //   title: '系统管理',\r\n      //   children: [{ key: '4001', title: '角色管理' },\r\n      //     { key: '4002', title: '修改密码'}],\r\n      // },\r\n\r\n\r\n    ]);\r\n    const user = computed(()=> store.state.user )\r\n    const getList = () =>{\r\n\r\n      const powerStr = user.value.power;\r\n\r\n      const powers = user.value.power.split(\",\");\r\n      console.log(powers)\r\n      for (let i=0; i<powers.length; i++){\r\n        const p = powers[i];\r\n        if (p === '1001'){\r\n          menuList.value.push ({\r\n            key: '1000',\r\n            title: '基础信息管理',\r\n            children: [{\r\n              key: '1001',\r\n              title: '教师管理',\r\n            }],\r\n          });\r\n        }\r\n        if (p === '1002'){\r\n          if (powerStr.indexOf(\"1001\") === -1){\r\n            menuList.value.push ({\r\n              key: '1000',\r\n              title: '基础信息管理',\r\n              children: [{\r\n                key: '1002',\r\n                title: '主任管理',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '1002', title: '主任管理',})\r\n          }\r\n\r\n\r\n\r\n        }\r\n        if (p === '2001'){\r\n          menuList.value.push({\r\n            key: '2000',\r\n            title: '公告信息管理',\r\n            children: [{\r\n              key: '2001',\r\n              title: '公告管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '3001'){\r\n          menuList.value.push({\r\n            key: '3000',\r\n            title: '课程管理',\r\n            children: [{\r\n              key: '3001',\r\n              title: '课程管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '3002'){\r\n\r\n          if (powerStr.indexOf(\"3001\") == -1){\r\n            menuList.value.push ({\r\n              key: '3000',\r\n              title: '课程管理',\r\n              children: [{\r\n                key: '3002',\r\n                title: '听课管理',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '3002', title: '听课管理',})\r\n          }\r\n\r\n        }\r\n\r\n        if (p === '4001'){\r\n          menuList.value.push({\r\n            key: '4000',\r\n            title: '系统管理',\r\n            children: [{\r\n              key: '4001',\r\n              title: '角色管理',\r\n            }],\r\n          })\r\n        }\r\n        if (p === '4002'){\r\n\r\n          if (powerStr.indexOf(\"4001\") === -1){\r\n            menuList.value.push ({\r\n              key: '4000',\r\n              title: '系统管理',\r\n              children: [{\r\n                key: '4002',\r\n                title: '修改密码',\r\n              }],\r\n            });\r\n          }else {\r\n            menuList.value[menuList.value.length-1].children.push({ key: '4002', title: '修改密码',})\r\n          }\r\n\r\n\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    const collapsed = ref(false);\r\n    const toggleCollapsed = () => {\r\n      collapsed.value = !collapsed.value;\r\n    };\r\n\r\n    onMounted(()=>{\r\n      getList()\r\n    })\r\n    return {\r\n      menuList,\r\n      collapsed,\r\n      toggleCollapsed,\r\n      selectedKeys: ref(['0000']),\r\n      openKeys: ref(['0000']),\r\n    };\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}