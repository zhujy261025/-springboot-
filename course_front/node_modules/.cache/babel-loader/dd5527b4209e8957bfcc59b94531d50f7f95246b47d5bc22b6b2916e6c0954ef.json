{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createElementVNode as _createElementVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin\": \"15px\",\n    \"width\": \"1000px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_input = _resolveComponent(\"a-input\");\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n  const _component_a_button = _resolveComponent(\"a-button\");\n  const _component_a_form = _resolveComponent(\"a-form\");\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\");\n  const _component_a_space = _resolveComponent(\"a-space\");\n  const _component_a_table = _resolveComponent(\"a-table\");\n  const _component_a_modal = _resolveComponent(\"a-modal\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\"  <a-table :dataSource=\\\"teacher\\\" :columns=\\\"columns\\\" />\"), _createCommentVNode(\"        表格\"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_a_form, {\n    layout: \"inline\",\n    model: $setup.state\n  }, {\n    default: _withCtx(() => [_createVNode(_component_a_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_a_input, {\n        value: $setup.state.name,\n        \"onUpdate:value\": _cache[0] || (_cache[0] = $event => $setup.state.name = $event),\n        placeholder: \"名称\"\n      }, null, 8 /* PROPS */, [\"value\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        type: \"primary\",\n        onClick: $setup.load\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"查询\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_a_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        type: \"primary\",\n        onClick: $setup.add\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"新增\")]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\"]), _createVNode(_component_a_table, {\n    dataSource: $setup.teacher,\n    columns: $setup.columns,\n    pagination: $setup.pagination,\n    onChange: $setup.handleTableChange\n  }, {\n    bodyCell: _withCtx(({\n      column,\n      record\n    }) => [_createCommentVNode(\"        操作\"), column.key === 'action' ? (_openBlock(), _createBlock(_component_a_space, {\n      key: 0\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        type: \"primary\",\n        onClick: $event => $setup.edit(record)\n      }, {\n        default: _withCtx(() => [_createTextVNode(\"编辑\")]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_a_popconfirm, {\n        title: \"是否确认删除?\",\n        \"ok-text\": \"是\",\n        \"cancel-text\": \"否\",\n        onConfirm: $event => $setup.del(record.id)\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_button, {\n          type: \"primary\",\n          danger: \"\"\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"删除\")]),\n          _: 1 /* STABLE */\n        })]),\n\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onConfirm\"])]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)) : _createCommentVNode(\"v-if\", true)]),\n    default: _withCtx(() => [_createTextVNode(\"> \")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"dataSource\", \"columns\", \"pagination\", \"onChange\"])]), _createVNode(_component_a_modal, {\n    visible: $setup.visible,\n    \"onUpdate:visible\": _cache[5] || (_cache[5] = $event => $setup.visible = $event),\n    title: \"Title\",\n    \"confirm-loading\": $setup.confirmLoading,\n    onOk: $setup.handleOk\n  }, {\n    default: _withCtx(() => [_createCommentVNode(\"      <p> 表单 </p>\"), _createVNode(_component_a_form, {\n      model: $setup.formState,\n      \"label-col\": $setup.labelCol,\n      \"wrapper-col\": $setup.wrapperCol\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_form_item, {\n        label: \"编号\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.id1,\n          \"onUpdate:value\": _cache[1] || (_cache[1] = $event => $setup.formState.id1 = $event),\n          disabled: !!$setup.formState.id\n        }, null, 8 /* PROPS */, [\"value\", \"disabled\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"姓名\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.name,\n          \"onUpdate:value\": _cache[2] || (_cache[2] = $event => $setup.formState.name = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"性别\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.sex,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = $event => $setup.formState.sex = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_a_form_item, {\n        label: \"联系方式\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_a_input, {\n          value: $setup.formState.mobile,\n          \"onUpdate:value\": _cache[4] || (_cache[4] = $event => $setup.formState.mobile = $event)\n        }, null, 8 /* PROPS */, [\"value\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"label-col\", \"wrapper-col\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\", \"confirm-loading\", \"onOk\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;EAKQA,KAAmC,EAAnC;IAAA;IAAA;EAAA;AAAmC;;;;;;;;;;6DAH3CC,iFAA6D,EAC7DA,iCAAiB,EAEfC,oBA0CM,OA1CNC,UA0CM,GAvCJC,aAcSC;IAbLC,MAAM,EAAC,QAAQ;IACdC,KAAK,EAAEC;;sBAEV,MAGc,CAHdJ,aAGcK;wBAFZ,MACU,CADVL,aACUM;QADOC,KAAK,EAAEH,YAAK,CAACI,IAAI;8DAAVJ,YAAK,CAACI,IAAI;QAAEC,WAAW,EAAC;;;QAGlDT,aAEcK;wBADZ,MAAqD,CAArDL,aAAqDU;QAA3CC,IAAI,EAAC,SAAS;QAAEC,OAAK,EAAER;;0BAAO,MAAE,kBAAF,IAAE;;;;QAE5CJ,aAEcK;wBADZ,MAAoD,CAApDL,aAAoDU;QAA1CC,IAAI,EAAC,SAAS;QAAEC,OAAK,EAAER;;0BAAM,MAAE,kBAAF,IAAE;;;;;;;gCAM7CJ,aAoBUa;IApBAC,UAAU,EAAEV,cAAO;IAAGW,OAAO,EAAEX,cAAO;IAAGY,UAAU,EAAEZ,iBAAU;IAAIa,QAAM,EAAEb;;IACxEc,QAAQ,WAEjB,CAAiB;MAFIC,MAAM;MAAEC;IAAM,OAEnCvB,iCAAiB,EACDsB,MAAM,CAACE,GAAG,+BACxBC,aAWUC;MAAAF;IAAA;wBATR,MAA4D,CAA5DrB,aAA4DU;QAAlDC,IAAI,EAAC,SAAS;QAAEC,OAAK,YAAER,WAAI,CAACgB,MAAM;;0BAAG,MAAE,kBAAF,IAAE;;wDACjDpB,aAOewB;QANXC,KAAK,EAAC,SAAS;QACf,SAAO,EAAC,GAAG;QACX,aAAW,EAAC,GAAG;QACdC,SAAO,YAAEtB,UAAG,CAACgB,MAAM,CAACO,EAAE;;0BAEzB,MAA6C,CAA7C3B,aAA6CU;UAAnCC,IAAI,EAAC,SAAS;UAACiB,MAAM,EAAN;;4BAAO,MAAE,kBAAF,IAAE;;;;;;;;sBAd4D,MACtG,kBADsG,IACtG;;4EAuBJ5B,aA0BU6B;IAzBEC,OAAO,EAAE1B,cAAO;4DAAPA,cAAO;IACxBqB,KAAK,EAAC,OAAO;IACZ,iBAAe,EAAErB,qBAAc;IAC/B2B,IAAE,EAAE3B;;sBAEP,MAAwB,CAAxBP,wCAAwB,EACxBG,aAiBSC;MAjBAE,KAAK,EAAEC,gBAAS;MAAG,WAAS,EAAEA,eAAQ;MAAG,aAAW,EAAEA;;wBAC7D,MAEc,CAFdJ,aAEcK;QAFD2B,KAAK,EAAC;MAAI;0BACrB,MAAmE,CAAnEhC,aAAmEM;UAAlDC,KAAK,EAAEH,gBAAS,CAAC6B,GAAG;gEAAb7B,gBAAS,CAAC6B,GAAG;UAAGC,QAAQ,IAAI9B,gBAAS,CAACuB;;;UAGhE3B,aAEcK;QAFD2B,KAAK,EAAC;MAAI;0BACrB,MAA0C,CAA1ChC,aAA0CM;UAAzBC,KAAK,EAAEH,gBAAS,CAACI,IAAI;gEAAdJ,gBAAS,CAACI,IAAI;;;UAIxCR,aAEcK;QAFD2B,KAAK,EAAC;MAAI;0BACrB,MAA0C,CAA1ChC,aAA0CM;UAAzBC,KAAK,EAAEH,gBAAS,CAAC+B,GAAG;gEAAb/B,gBAAS,CAAC+B,GAAG;;;UAEvCnC,aAEcK;QAFD2B,KAAK,EAAC;MAAM;0BACvB,MAA6C,CAA7ChC,aAA6CM;UAA5BC,KAAK,EAAEH,gBAAS,CAACgC,MAAM;gEAAhBhC,gBAAS,CAACgC,MAAM","names":["style","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","_component_a_form","layout","model","$setup","_component_a_form_item","_component_a_input","value","name","placeholder","_component_a_button","type","onClick","_component_a_table","dataSource","columns","pagination","onChange","bodyCell","column","record","key","_createBlock","_component_a_space","_component_a_popconfirm","title","onConfirm","id","danger","_component_a_modal","visible","onOk","label","id1","disabled","sex","mobile"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\views\\Teacher.vue"],"sourcesContent":["<template>\r\n\r\n<!--  <a-table :dataSource=\"teacher\" :columns=\"columns\" />-->\r\n<!--        表格-->\r\n\r\n  <div  style=\"margin: 15px; width: 1000px\">\r\n\r\n\r\n    <a-form\r\n        layout=\"inline\"\r\n        :model=\"state\"\r\n    >\r\n      <a-form-item>\r\n        <a-input v-model:value=\"state.name\" placeholder=\"名称\">\r\n        </a-input>\r\n      </a-form-item>\r\n      <a-form-item>\r\n        <a-button type=\"primary\" @click=\"load\" >查询</a-button>\r\n      </a-form-item>\r\n      <a-form-item>\r\n        <a-button type=\"primary\" @click=\"add\" >新增</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n\r\n\r\n\r\n    <a-table :dataSource=\"teacher\" :columns=\"columns\" :pagination=\"pagination\"  @change=\"handleTableChange\">>\r\n      <template #bodyCell=\"{ column, record }\">\r\n\r\n        <!--        操作-->\r\n        <template v-if=\"column.key === 'action'\">\r\n          <a-space>\r\n\r\n            <a-button type=\"primary\" @click=\"edit(record)\">编辑</a-button>\r\n            <a-popconfirm\r\n                title=\"是否确认删除?\"\r\n                ok-text=\"是\"\r\n                cancel-text=\"否\"\r\n                @confirm=\"del(record.id)\"\r\n            >\r\n              <a-button type=\"primary\" danger>删除</a-button>\r\n            </a-popconfirm>\r\n          </a-space>\r\n        </template>\r\n\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n\r\n  <a-modal\r\n      v-model:visible=\"visible\"\r\n      title=\"Title\"\r\n      :confirm-loading=\"confirmLoading\"\r\n      @ok=\"handleOk\"\r\n  >\r\n    <!--      <p> 表单 </p>-->\r\n    <a-form :model=\"formState\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n      <a-form-item label=\"编号\"  >\r\n        <a-input v-model:value=\"formState.id1\" :disabled=\"!!formState.id\"/>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"姓名\">\r\n        <a-input v-model:value=\"formState.name\" />\r\n      </a-form-item>\r\n\r\n\r\n      <a-form-item label=\"性别\"  >\r\n        <a-input v-model:value=\"formState.sex\"  />\r\n      </a-form-item>\r\n      <a-form-item label=\"联系方式\"  >\r\n        <a-input v-model:value=\"formState.mobile\"  />\r\n      </a-form-item>\r\n\r\n    </a-form>\r\n\r\n  </a-modal>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { message } from 'ant-design-vue';\r\nimport axios from \"axios\"\r\nimport {onMounted, ref} from \"vue\";\r\nexport default {\r\n  name: \"Teacher\",\r\n  setup(){\r\n    const state = ref({})\r\n    const teacher = ref();\r\n    const columns = ref([\r\n      {\r\n        title: '编号',\r\n        dataIndex: 'id',\r\n        key:'id'\r\n      },\r\n      {\r\n        title: '姓名',\r\n        dataIndex: 'name',\r\n        key:\"name\"\r\n      },\r\n      {\r\n        title: '性别',\r\n        dataIndex: 'sex',\r\n        key: 'sex'\r\n      },\r\n      {\r\n        title: '联系方式',\r\n        dataIndex: 'mobile',\r\n        key:\"mobile\"\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'action'\r\n      }\r\n\r\n    ]);\r\n\r\n    // 分页对象\r\n    const pagination = ref({\r\n      total:'',\r\n      current:1,\r\n      pageSize:2\r\n    })\r\n\r\n    // 表单\r\n    const formState = ref({})\r\n    const visible = ref(false);  // 对话框的开关\r\n    const confirmLoading = ref(false); // 确认按钮的加载\r\n\r\n    // 编辑的点击事件\r\n    const edit = (record) => {\r\n      // JSON.stringify(record) 转为为字符串\r\n      // JSON.parse(“str“) 转为json对象\r\n\r\n      formState.value = JSON.parse(JSON.stringify(record));\r\n      formState.value.id1 = record.id\r\n      visible.value = true;\r\n    };\r\n\r\n    // 新增的点击事件\r\n    const add = () => {\r\n      formState.value = {}; // 清空表单数据\r\n      visible.value = true; // 打开对话框\r\n    };\r\n\r\n    // 查询方法\r\n    const load = ()=>{\r\n      axios.get(\"api/findTeacher\",{\r\n        params:{\r\n          pageNum:pagination.value.current,\r\n          pageSize: pagination.value.pageSize,\r\n          name:state.value.name\r\n        }\r\n      }).then(res=>{\r\n        if (res.data.code === \"200\"){\r\n          teacher.value = res.data.date.list\r\n          pagination.value.total = res.data.date.total\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    }\r\n\r\n    // 页码发生改变时会调用这个方法\r\n    const handleTableChange = (pagination2)=>{\r\n      pagination.value = pagination2\r\n      console.log(pagination.value)\r\n      load()\r\n    }\r\n    // 对话框ok时会调用\r\n    const handleOk = () => {\r\n      confirmLoading.value = true;  // 开启确认按钮的加载\r\n      formState.value.password = '123456';\r\n      formState.value.type = \"1\";\r\n      formState.value.roleid = \"0001\";\r\n      formState.value.id = formState.value.id1\r\n      // 发送请求\r\n      axios.post(\"api/saveUser\",formState.value).then(res=>{\r\n        console.log(res)\r\n        confirmLoading.value = false; // 关闭确认按钮的加载\r\n        visible.value = false;  // 关闭对话框\r\n        if (res.data.code === \"200\"){\r\n          load()\r\n          message.success(res.data.msg);\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    }\r\n\r\n    // 删除的点击事件\r\n    const del = (id) => {\r\n      // 发送请求\r\n      axios.delete(\"api/delUser/\" + id).then(res=>{\r\n        console.log(res)\r\n        if (res.data.code === \"200\"){\r\n          // 重新加载数据\r\n          load()\r\n          message.success(res.data.msg);\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    };\r\n    onMounted(()=>{\r\n      load()\r\n    })\r\n\r\n    return {\r\n      columns,\r\n      teacher,\r\n\r\n      // 表单\r\n      labelCol: { style: { width: '130px' } },\r\n      wrapperCol: { span: 14 },\r\n      formState,\r\n      visible,\r\n      confirmLoading,\r\n      edit,\r\n      add,\r\n      handleOk,\r\n      del,\r\n      pagination,\r\n      load,\r\n      state,\r\n      handleTableChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}