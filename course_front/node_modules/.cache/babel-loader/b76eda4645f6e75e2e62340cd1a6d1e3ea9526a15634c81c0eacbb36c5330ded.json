{"ast":null,"code":"import { ref } from \"vue\";\nimport { message } from \"ant-design-vue\";\nimport axios from \"axios\";\nexport default {\n  name: \"UpPwd\",\n  setup() {\n    const formState = ref({});\n    const onFinish = values => {\n      console.log('Success:', values);\n      // console.log(\"---\",formState.value)\n\n      if (formState.value.newPassword == formState.value.newPassword2) {\n        axios.post(\"api/upPwd\", {}, {\n          params: {\n            oldPwd: formState.value.oldPassword,\n            newPwd: formState.value.newPassword\n          }\n        }).then(res => {\n          console.log(res);\n          if (res.data.code === \"200\") {\n            message.success(res.data.date);\n            formState.value = {};\n          } else {\n            message.error(res.data.date);\n          }\n        });\n      } else {\n        message.error(\"新密码与确认密码不一致\");\n      }\n    };\n    const onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n    return {\n      formState,\n      onFinish,\n      onFinishFailed\n    };\n  }\n};","map":{"version":3,"mappings":"AA4CA,SAAQA,GAAG,QAAO,KAAK;AACvB,SAAQC,OAAO,QAAO,gBAAgB;AACtC,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAK,GAAE;IACL,MAAMC,SAAQ,GAAIL,GAAG,CAAC,CAAC,CAAC,CAAC;IACzB,MAAMM,QAAO,GAAIC,MAAK,IAAK;MACzBC,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEF,MAAM,CAAC;MAC/B;;MAEA,IAAIF,SAAS,CAACK,KAAK,CAACC,WAAU,IAAKN,SAAS,CAACK,KAAK,CAACE,YAAY,EAAC;QAC9DV,KAAK,CAACW,IAAI,CAAC,WAAW,EAAC,CAAC,CAAC,EAAC;UACxBC,MAAM,EAAC;YACLC,MAAM,EAAEV,SAAS,CAACK,KAAK,CAACM,WAAW;YACnCC,MAAM,EAAEZ,SAAS,CAACK,KAAK,CAACC;UAC1B;QACF,CAAC,CAAC,CAACO,IAAI,CAACC,GAAG,IAAE;UACXX,OAAO,CAACC,GAAG,CAACU,GAAG;UACf,IAAIA,GAAG,CAACC,IAAI,CAACC,IAAG,KAAM,KAAK,EAAC;YAC1BpB,OAAO,CAACqB,OAAO,CAACH,GAAG,CAACC,IAAI,CAACG,IAAI,CAAC;YAC9BlB,SAAS,CAACK,KAAI,GAAI,CAAC;UACrB,CAAC,MAAK;YACJT,OAAO,CAACuB,KAAK,CAACL,GAAG,CAACC,IAAI,CAACG,IAAI,CAAC;UAC9B;QACF,CAAC;MACH,CAAC,MAAK;QACJtB,OAAO,CAACuB,KAAK,CAAC,aAAa,CAAC;MAC9B;IAEF,CAAC;IACD,MAAMC,cAAa,GAAIC,SAAQ,IAAK;MAClClB,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEiB,SAAS,CAAC;IACnC,CAAC;IACD,OAAO;MACLrB,SAAS;MACTC,QAAQ;MACRmB;IACF,CAAC;EACH;AACF","names":["ref","message","axios","name","setup","formState","onFinish","values","console","log","value","newPassword","newPassword2","post","params","oldPwd","oldPassword","newPwd","then","res","data","code","success","date","error","onFinishFailed","errorInfo"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\views\\UpPwd.vue"],"sourcesContent":["<template>\r\n  <div  style=\"margin: 15px; width: 1000px\">\r\n\r\n    <h1 style=\"text-align: center\">修改密码</h1>\r\n\r\n    <a-form\r\n        :model=\"formState\"\r\n        name=\"basic\"\r\n        :label-col=\"{ span: 7 }\"\r\n        :wrapper-col=\"{ span: 12 }\"\r\n        autocomplete=\"off\"\r\n        @finish=\"onFinish\"\r\n        @finishFailed=\"onFinishFailed\"\r\n    >\r\n      <a-form-item\r\n          label=\"旧密码\"\r\n          name=\"oldPassword\"\r\n      >\r\n        <a-input-password  v-model:value=\"formState.oldPassword\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item\r\n          label=\"新密码\"\r\n          name=\"newPassword\"\r\n      >\r\n        <a-input-password v-model:value=\"formState.newPassword\" />\r\n      </a-form-item>\r\n      <a-form-item\r\n          label=\"确认密码\"\r\n          name=\"newPassword2\"\r\n      >\r\n        <a-input-password v-model:value=\"formState.newPassword2\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item :wrapper-col=\"{ offset: 11, span: 13 }\">\r\n        <a-button type=\"primary\" html-type=\"submit\">提交</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {ref} from \"vue\";\r\nimport {message} from \"ant-design-vue\";\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  name: \"UpPwd\",\r\n  setup(){\r\n    const formState = ref({});\r\n    const onFinish = values => {\r\n      console.log('Success:', values);\r\n      // console.log(\"---\",formState.value)\r\n\r\n      if (formState.value.newPassword == formState.value.newPassword2){\r\n        axios.post(\"api/upPwd\",{},{\r\n          params:{\r\n            oldPwd: formState.value.oldPassword,\r\n            newPwd: formState.value.newPassword\r\n          }\r\n        }).then(res=>{\r\n          console.log(res)\r\n          if (res.data.code === \"200\"){\r\n            message.success(res.data.date);\r\n            formState.value = {}\r\n          }else {\r\n            message.error(res.data.date);\r\n          }\r\n        })\r\n      }else {\r\n        message.error(\"新密码与确认密码不一致\");\r\n      }\r\n\r\n    };\r\n    const onFinishFailed = errorInfo => {\r\n      console.log('Failed:', errorInfo);\r\n    };\r\n    return {\r\n      formState,\r\n      onFinish,\r\n      onFinishFailed,\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}