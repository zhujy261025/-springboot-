{"ast":null,"code":"import { onMounted, ref } from \"vue\";\nimport axios from \"axios\";\nimport { message } from \"ant-design-vue\";\nexport default {\n  name: \"Role\",\n  setup() {\n    const roles = ref([]);\n    const columns = ref([{\n      title: '角色ID',\n      dataIndex: 'roleid',\n      key: 'roleid'\n    }, {\n      title: '角色名称',\n      dataIndex: 'rolename',\n      key: 'rolename'\n    }, {\n      title: '操作',\n      key: 'action'\n    }]);\n    const power = ref([{\n      label: '教师管理',\n      value: '1001'\n    }, {\n      label: '主任管理',\n      value: '1002'\n    }, {\n      label: '公告管理',\n      value: '2001'\n    }, {\n      label: '课程管理',\n      value: '3001'\n    }, {\n      label: '听课管理',\n      value: '3002'\n    }, {\n      label: '角色管理',\n      value: '4001'\n    }, {\n      label: '修改密码',\n      value: '4002'\n    }]);\n    // 查询方法\n    const load = () => {\n      axios.get(\"api/queryRole\", {}).then(res => {\n        console.log(res);\n        if (res.data.code === \"200\") {\n          roles.value = res.data.date;\n        } else {\n          message.error(res.data.msg);\n        }\n      });\n    };\n    const formState = ref({});\n    const visible = ref(false); // 对话框的开关\n    const confirmLoading = ref(false); // 确认按钮的加载\n    // 编辑的点击事件\n    const edit = record => {\n      formState.value = JSON.parse(JSON.stringify(record));\n      const powers = formState.value.power;\n      formState.value.power = powers.split(\",\");\n      visible.value = true;\n    };\n\n    // 对话框ok时会调用\n    const handleOk = () => {\n      confirmLoading.value = true; // 开启确认按钮的加载\n      formState.value.power = formState.value.power.toString();\n      axios.put(\"api/editRole\", formState.value).then(res => {\n        confirmLoading.value = false;\n        visible.value = false;\n        console.log(res);\n        if (res.data.code === \"200\") {\n          load();\n          message.success(res.data.msg);\n        } else {\n          message.error(res.data.msg);\n        }\n      });\n    };\n    onMounted(() => {\n      load();\n    });\n    return {\n      roles,\n      columns,\n      labelCol: {\n        style: {\n          width: '130px'\n        }\n      },\n      wrapperCol: {\n        span: 14\n      },\n      formState,\n      visible,\n      confirmLoading,\n      edit,\n      power,\n      handleOk\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["onMounted","ref","axios","message","name","setup","roles","columns","title","dataIndex","key","power","label","value","load","get","then","res","console","log","data","code","date","error","msg","formState","visible","confirmLoading","edit","record","JSON","parse","stringify","powers","split","handleOk","toString","put","success","labelCol","style","width","wrapperCol","span"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\views\\Role.vue"],"sourcesContent":["<template>\r\n  <div  style=\"margin: 15px; width: 1000px\">\r\n\r\n    <a-table :dataSource=\"roles\" :columns=\"columns\" :pagination=\"false\">\r\n      <template #bodyCell=\"{ column, record }\">\r\n\r\n        <!--        操作-->\r\n        <template v-if=\"column.key === 'action'\">\r\n          <a-space>\r\n\r\n            <a-button type=\"primary\" @click=\"edit(record)\">编辑</a-button>\r\n          </a-space>\r\n        </template>\r\n\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n\r\n  <a-modal\r\n      v-model:visible=\"visible\"\r\n      title=\"表单\"\r\n      :confirm-loading=\"confirmLoading\"\r\n      @ok=\"handleOk\"\r\n  >\r\n    <!--      <p> 表单 </p>-->\r\n    <a-form :model=\"formState\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n      <a-form-item label=\"角色ID\"   >\r\n        <a-input v-model:value=\"formState.roleid\" />\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"角色名称\">\r\n        <a-input v-model:value=\"formState.rolename\" />\r\n      </a-form-item>\r\n      <a-form-item label=\"角色权限\">\r\n        <a-checkbox-group v-model:value=\"formState.power\" :options=\"power\" />\r\n      </a-form-item>\r\n\r\n\r\n\r\n    </a-form>\r\n\r\n  </a-modal>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, ref} from \"vue\";\r\nimport axios from \"axios\";\r\nimport {message} from \"ant-design-vue\";\r\n\r\n\r\nexport default {\r\n  name: \"Role\",\r\n  setup(){\r\n    const roles = ref([]);\r\n    const columns = ref([\r\n      {\r\n        title: '角色ID',\r\n        dataIndex: 'roleid',\r\n        key:'roleid'\r\n      },\r\n      {\r\n        title: '角色名称',\r\n        dataIndex: 'rolename',\r\n        key:'rolename'\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'action'\r\n      }\r\n\r\n\r\n    ]);\r\n\r\n    const power = ref([\r\n      { label: '教师管理', value: '1001' },\r\n      { label: '主任管理', value: '1002' },\r\n      { label: '公告管理', value: '2001' },\r\n      { label: '课程管理', value: '3001' },\r\n      { label: '听课管理', value: '3002' },\r\n      { label: '角色管理', value: '4001' },\r\n      { label: '修改密码', value: '4002' },\r\n    ]);\r\n    // 查询方法\r\n    const load = ()=>{\r\n      axios.get(\"api/queryRole\",{}).then(res=>{\r\n        console.log(res)\r\n        if (res.data.code === \"200\"){\r\n          roles.value = res.data.date\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    }\r\n\r\n    const formState = ref({});\r\n    const visible = ref(false);  // 对话框的开关\r\n    const confirmLoading = ref(false); // 确认按钮的加载\r\n    // 编辑的点击事件\r\n    const edit = (record) => {\r\n      formState.value = JSON.parse(JSON.stringify(record));\r\n      const powers = formState.value.power;\r\n      formState.value.power = powers.split(\",\");\r\n      visible.value = true;\r\n    };\r\n\r\n    // 对话框ok时会调用\r\n    const handleOk = () => {\r\n      confirmLoading.value = true;  // 开启确认按钮的加载\r\n      formState.value.power =  formState.value.power.toString();\r\n      axios.put(\"api/editRole\",formState.value).then(res=>{\r\n        confirmLoading.value = false;\r\n        visible.value = false;\r\n        console.log(res)\r\n        if (res.data.code === \"200\"){\r\n          load()\r\n          message.success(res.data.msg);\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n\r\n\r\n    }\r\n\r\n    onMounted(()=>{\r\n      load()\r\n    })\r\n    return {\r\n      roles,\r\n      columns,\r\n\r\n      labelCol: { style: { width: '130px' } },\r\n      wrapperCol: { span: 14 },\r\n      formState,\r\n      visible,\r\n      confirmLoading,\r\n      edit,\r\n      power,\r\n\r\n      handleOk\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}