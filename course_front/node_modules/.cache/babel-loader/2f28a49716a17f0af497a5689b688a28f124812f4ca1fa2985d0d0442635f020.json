{"ast":null,"code":"import { message } from 'ant-design-vue';\nimport axios from \"axios\";\nimport { onMounted, ref } from \"vue\";\nexport default {\n  name: \"Teacher\",\n  setup() {\n    const state = ref({});\n    const teacher = ref();\n    const columns = ref([{\n      title: '编号',\n      dataIndex: 'id',\n      key: 'id'\n    }, {\n      title: '姓名',\n      dataIndex: 'name',\n      key: \"name\"\n    }, {\n      title: '性别',\n      dataIndex: 'sex',\n      key: 'sex'\n    }, {\n      title: '联系方式',\n      dataIndex: 'mobile',\n      key: \"mobile\"\n    }, {\n      title: '操作',\n      key: 'action'\n    }]);\n\n    // 分页对象\n    const pagination = ref({\n      total: '',\n      current: 1,\n      pageSize: 2\n    });\n\n    // 表单\n    const formState = ref({});\n    const visible = ref(false); // 对话框的开关\n    const confirmLoading = ref(false); // 确认按钮的加载\n\n    // 编辑的点击事件\n    const edit = record => {\n      // JSON.stringify(record) 转为为字符串\n      // JSON.parse(“str“) 转为json对象\n\n      formState.value = JSON.parse(JSON.stringify(record));\n      formState.value.id1 = record.id;\n      visible.value = true;\n    };\n\n    // 新增的点击事件\n    const add = () => {\n      formState.value = {}; // 清空表单数据\n      visible.value = true; // 打开对话框\n    };\n\n    // 查询方法\n    const load = () => {\n      axios.get(\"api/findTeacher\", {\n        params: {\n          pageNum: pagination.value.current,\n          pageSize: pagination.value.pageSize,\n          name: state.value.name\n        }\n      }).then(res => {\n        if (res.data.code === \"200\") {\n          teacher.value = res.data.date.list;\n          pagination.value.total = res.data.date.total;\n        } else {\n          message.error(res.data.msg);\n        }\n      });\n    };\n\n    // 页码发生改变时会调用这个方法\n    const handleTableChange = pagination2 => {\n      pagination.value = pagination2;\n      console.log(pagination.value);\n      load();\n    };\n    // 对话框ok时会调用\n    const handleOk = () => {\n      confirmLoading.value = true; // 开启确认按钮的加载\n      formState.value.password = '123456';\n      formState.value.type = \"1\";\n      formState.value.roleid = \"0001\";\n      formState.value.id = formState.value.id1;\n      // 发送请求\n      axios.post(\"api/saveUser\", formState.value).then(res => {\n        console.log(res);\n        confirmLoading.value = false; // 关闭确认按钮的加载\n        visible.value = false; // 关闭对话框\n        if (res.data.code === \"200\") {\n          load();\n          message.success(res.data.msg);\n        } else {\n          message.error(res.data.msg);\n        }\n      });\n    };\n\n    // 删除的点击事件\n    const del = id => {\n      // 发送请求\n      axios.delete(\"api/delUser/\" + id).then(res => {\n        console.log(res);\n        if (res.data.code === \"200\") {\n          // 重新加载数据\n          load();\n          message.success(res.data.msg);\n        } else {\n          message.error(res.data.msg);\n        }\n      });\n    };\n    onMounted(() => {\n      load();\n    });\n    return {\n      columns,\n      teacher,\n      // 表单\n      labelCol: {\n        style: {\n          width: '130px'\n        }\n      },\n      wrapperCol: {\n        span: 14\n      },\n      formState,\n      visible,\n      confirmLoading,\n      edit,\n      add,\n      handleOk,\n      del,\n      pagination,\n      load,\n      state,\n      handleTableChange\n    };\n  }\n};","map":{"version":3,"mappings":"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","names":["message","axios","onMounted","ref","name","setup","state","teacher","columns","title","dataIndex","key","pagination","total","current","pageSize","formState","visible","confirmLoading","edit","record","value","JSON","parse","stringify","id1","id","add","load","get","params","pageNum","then","res","data","code","date","list","error","msg","handleTableChange","pagination2","console","log","handleOk","password","type","roleid","post","success","del","delete","labelCol","style","width","wrapperCol","span"],"sourceRoot":"","sources":["E:\\WeChat Files\\wxid_77r24v1adq6c22\\FileStorage\\File\\2024-11\\前端代码\\courseweb\\course\\src\\views\\Teacher.vue"],"sourcesContent":["<template>\r\n\r\n<!--  <a-table :dataSource=\"teacher\" :columns=\"columns\" />-->\r\n<!--        表格-->\r\n\r\n  <div  style=\"margin: 15px; width: 1000px\">\r\n\r\n\r\n    <a-form\r\n        layout=\"inline\"\r\n        :model=\"state\"\r\n    >\r\n      <a-form-item>\r\n        <a-input v-model:value=\"state.name\" placeholder=\"名称\">\r\n        </a-input>\r\n      </a-form-item>\r\n      <a-form-item>\r\n        <a-button type=\"primary\" @click=\"load\" >查询</a-button>\r\n      </a-form-item>\r\n      <a-form-item>\r\n        <a-button type=\"primary\" @click=\"add\" >新增</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n\r\n\r\n\r\n    <a-table :dataSource=\"teacher\" :columns=\"columns\" :pagination=\"pagination\"  @change=\"handleTableChange\">>\r\n      <template #bodyCell=\"{ column, record }\">\r\n\r\n        <!--        操作-->\r\n        <template v-if=\"column.key === 'action'\">\r\n          <a-space>\r\n\r\n            <a-button type=\"primary\" @click=\"edit(record)\">编辑</a-button>\r\n            <a-popconfirm\r\n                title=\"是否确认删除?\"\r\n                ok-text=\"是\"\r\n                cancel-text=\"否\"\r\n                @confirm=\"del(record.id)\"\r\n            >\r\n              <a-button type=\"primary\" danger>删除</a-button>\r\n            </a-popconfirm>\r\n          </a-space>\r\n        </template>\r\n\r\n      </template>\r\n    </a-table>\r\n  </div>\r\n\r\n\r\n  <a-modal\r\n      v-model:visible=\"visible\"\r\n      title=\"Title\"\r\n      :confirm-loading=\"confirmLoading\"\r\n      @ok=\"handleOk\"\r\n  >\r\n    <!--      <p> 表单 </p>-->\r\n    <a-form :model=\"formState\" :label-col=\"labelCol\" :wrapper-col=\"wrapperCol\">\r\n      <a-form-item label=\"编号\"  >\r\n        <a-input v-model:value=\"formState.id1\" :disabled=\"!!formState.id\"/>\r\n      </a-form-item>\r\n\r\n      <a-form-item label=\"姓名\">\r\n        <a-input v-model:value=\"formState.name\" />\r\n      </a-form-item>\r\n\r\n\r\n      <a-form-item label=\"性别\"  >\r\n        <a-input v-model:value=\"formState.sex\"  />\r\n      </a-form-item>\r\n      <a-form-item label=\"联系方式\"  >\r\n        <a-input v-model:value=\"formState.mobile\"  />\r\n      </a-form-item>\r\n\r\n    </a-form>\r\n\r\n  </a-modal>\r\n\r\n</template>\r\n\r\n<script>\r\nimport { message } from 'ant-design-vue';\r\nimport axios from \"axios\"\r\nimport {onMounted, ref} from \"vue\";\r\nexport default {\r\n  name: \"Teacher\",\r\n  setup(){\r\n    const state = ref({})\r\n    const teacher = ref();\r\n    const columns = ref([\r\n      {\r\n        title: '编号',\r\n        dataIndex: 'id',\r\n        key:'id'\r\n      },\r\n      {\r\n        title: '姓名',\r\n        dataIndex: 'name',\r\n        key:\"name\"\r\n      },\r\n      {\r\n        title: '性别',\r\n        dataIndex: 'sex',\r\n        key: 'sex'\r\n      },\r\n      {\r\n        title: '联系方式',\r\n        dataIndex: 'mobile',\r\n        key:\"mobile\"\r\n      },\r\n      {\r\n        title: '操作',\r\n        key: 'action'\r\n      }\r\n\r\n    ]);\r\n\r\n    // 分页对象\r\n    const pagination = ref({\r\n      total:'',\r\n      current:1,\r\n      pageSize:2\r\n    })\r\n\r\n    // 表单\r\n    const formState = ref({})\r\n    const visible = ref(false);  // 对话框的开关\r\n    const confirmLoading = ref(false); // 确认按钮的加载\r\n\r\n    // 编辑的点击事件\r\n    const edit = (record) => {\r\n      // JSON.stringify(record) 转为为字符串\r\n      // JSON.parse(“str“) 转为json对象\r\n\r\n      formState.value = JSON.parse(JSON.stringify(record));\r\n      formState.value.id1 = record.id\r\n      visible.value = true;\r\n    };\r\n\r\n    // 新增的点击事件\r\n    const add = () => {\r\n      formState.value = {}; // 清空表单数据\r\n      visible.value = true; // 打开对话框\r\n    };\r\n\r\n    // 查询方法\r\n    const load = ()=>{\r\n      axios.get(\"api/findTeacher\",{\r\n        params:{\r\n          pageNum:pagination.value.current,\r\n          pageSize: pagination.value.pageSize,\r\n          name:state.value.name\r\n        }\r\n      }).then(res=>{\r\n        if (res.data.code === \"200\"){\r\n          teacher.value = res.data.date.list\r\n          pagination.value.total = res.data.date.total\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    }\r\n\r\n    // 页码发生改变时会调用这个方法\r\n    const handleTableChange = (pagination2)=>{\r\n      pagination.value = pagination2\r\n      console.log(pagination.value)\r\n      load()\r\n    }\r\n    // 对话框ok时会调用\r\n    const handleOk = () => {\r\n      confirmLoading.value = true;  // 开启确认按钮的加载\r\n      formState.value.password = '123456';\r\n      formState.value.type = \"1\";\r\n      formState.value.roleid = \"0001\";\r\n      formState.value.id = formState.value.id1\r\n      // 发送请求\r\n      axios.post(\"api/saveUser\",formState.value).then(res=>{\r\n        console.log(res)\r\n        confirmLoading.value = false; // 关闭确认按钮的加载\r\n        visible.value = false;  // 关闭对话框\r\n        if (res.data.code === \"200\"){\r\n          load()\r\n          message.success(res.data.msg);\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    }\r\n\r\n    // 删除的点击事件\r\n    const del = (id) => {\r\n      // 发送请求\r\n      axios.delete(\"api/delUser/\" + id).then(res=>{\r\n        console.log(res)\r\n        if (res.data.code === \"200\"){\r\n          // 重新加载数据\r\n          load()\r\n          message.success(res.data.msg);\r\n        }else {\r\n          message.error(res.data.msg);\r\n        }\r\n      })\r\n    };\r\n    onMounted(()=>{\r\n      load()\r\n    })\r\n\r\n    return {\r\n      columns,\r\n      teacher,\r\n\r\n      // 表单\r\n      labelCol: { style: { width: '130px' } },\r\n      wrapperCol: { span: 14 },\r\n      formState,\r\n      visible,\r\n      confirmLoading,\r\n      edit,\r\n      add,\r\n      handleOk,\r\n      del,\r\n      pagination,\r\n      load,\r\n      state,\r\n      handleTableChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}